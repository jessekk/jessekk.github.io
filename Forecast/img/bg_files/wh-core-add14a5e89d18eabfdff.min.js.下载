/*! wallhaven v1.0.5 2023-03-26 */
!function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n=window.webpackJsonp;window.webpackJsonp=function(i,r,s){for(var a,l,c,u=0,h=[];u<i.length;u++)l=i[u],o[l]&&h.push(o[l][0]),o[l]=0;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);for(n&&n(i,r,s);h.length;)h.shift()();if(s)for(u=0;u<s.length;u++)c=e(e.s=s[u]);return c};var i={},o={1:0};e.e=function(t){function n(){a.onerror=a.onload=null,clearTimeout(l);var e=o[t];0!==e&&(e&&e[1](new Error("Loading chunk "+t+" failed.")),o[t]=void 0)}var i=o[t];if(0===i)return new Promise(function(t){t()});if(i)return i[2];var r=new Promise(function(e,n){i=o[t]=[e,n]});i[2]=r;var s=document.getElementsByTagName("head")[0],a=document.createElement("script");a.type="text/javascript",a.charset="utf-8",a.async=!0,a.timeout=12e4,e.nc&&a.setAttribute("nonce",e.nc),a.src=e.p+"wh-"+t+"-add14a5e89d18eabfdff.min.js";var l=setTimeout(n,12e4);return a.onerror=a.onload=n,s.appendChild(a),r},e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/assets/",e.oe=function(t){throw console.error(t),t},e(e.s=56)}([function(t,e,n){"use strict";function i(){_.globalSpinner.stop(0),clearTimeout(D),S.removeClass("overlay-hidden"),w.b.keydown(b)}function o(){S.addClass("overlay-hidden"),A&&(A.remove(),A=null),l(),D=setTimeout(function(){T.empty().attr("style","")},500)}function r(t){$(t.target).closest(T).length||(t.preventDefault(),s())}function s(t){"function"==typeof t?j=t:("function"==typeof j&&j(),P=j=null,o())}function a(t){"function"==typeof t?P=t:("function"==typeof P&&P(),P=j=null,o())}function l(t){void 0===t||t?O||($(".dead-button.submit",T).off("click",k.c).addClass("live"),O=!0):c()}function c(t){void 0===t||t?O&&($(".dead-button.submit",T).click(k.c).removeClass("live"),O=!1):l()}function u(t){T.html(t),A=n.i(x.a)($(".overlay-content",T)),i()}function h(){return T}function d(t,e){T.html(E),e&&$(".overlay-title",T).html(e),"string"!=typeof t&&"number"!=typeof t&&(t=C),$(".overlay-content",T).html("<p>"+t+'</p><a class="button jsAnchor overlay-close">Okay</a>'),i()}function f(t,e){d(t||C,e?"Error: "+e:"Error")}function p(t,e){return function(n){return f(n&&n.msg||t,e)}}function v(t,e){return T.html(E),$(".overlay-title",T).html(e||"Are you sure?"),$(".overlay-content",T).html("<p>"+t+'</p><a class="button jsAnchor overlay-close"><i class="far fa-times"></i> Cancel</a><a class="green button jsAnchor overlay-submit"><i class="far fa-check"></i> Continue</a>'),i(),new Promise(function(t){P=t})}function g(t){var e=t.originalEvent;if(!e.confirmed){t.preventDefault();var n=$(this);v(n.data("confirm")).then(function(){var t=new MouseEvent(e.type,e);t.confirmed=!0,n[0].dispatchEvent(t)})}}function m(t){t.preventDefault(),y(this.href||$(this).data("href"))}function y(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return _.globalSpinner.start(),$.get(t,e).catch(function(){return f()}).then(function(t){if(t&&t.view&&(void 0===t.status||t.status))return u(t.view),T;f(t&&t.view)})}function b(t){t.isDefaultPrevented()||27!==t.keyCode||(t.preventDefault(),o())}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"defaultError",function(){return C}),e.show=i,e.hide=o,e.cancel=s,e.submit=a,e.allowSubmit=l,e.forbidSubmit=c,e.html=u,e.container=h,e.alert=d,e.error=f,e.errorCallback=p,e.confirm=v,e.fetchView=y;var w=n(3),k=n(4),_=n(1),x=n(9),C="Something went wrong. Sorry :/",S=$("#overlay"),T=$(".overlay-inner",S),E=T.html(),O=!0,P=void 0,j=void 0,A=void 0,D=void 0;S.click(r),T.on("click",".overlay-close",s),T.on("click",".overlay-submit",a),w.b.on("click",".overlay-anchor",m),w.b.on("click","a[data-confirm]",g)},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e,n,i){t instanceof $||"string"==typeof t||t instanceof Element||(e=t,t=null),$.isNumeric(e)&&(e={startDelay:+e});var o=new p(t,e,i);return t&&(void 0===n||n)&&o._startNow(),o}function r(t,e,n){return o(t,e,n,h)}function s(t,e,n){return o(t,e,n,d)}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"defaultTemplate",function(){return c}),n.d(e,"globalSpinnerTemplate",function(){return u}),n.d(e,"tooltipTemplate",function(){return h}),n.d(e,"textTemplate",function(){return d}),n.d(e,"defaultSettings",function(){return f}),e.default=o,e.tooltip=r,e.text=s,n.d(e,"Spinner",function(){return p}),n.d(e,"globalSpinner",function(){return v});var a=n(3),l=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),c='<i class="spinner far fa-lg fa-spinner fa-spin"></i>',u='<div id="global-spinner">'+c+"</div>",h='<span class="tooltip tooltip-right" style="display:none">'+c+"</span>",d='<span>loading… <i class="spinner far fa-spinner fa-spin"></i></span>',f={startDelay:250,stopDelay:0,successDelay:2e3,errorDelay:5e3},p=function(){function t(e,n,o){i(this,t),o?(this.$outer=$(o),this.$spinner=$(".spinner",this.$outer)):this.$outer=this.$spinner=$(c),this.settings=$.extend({},f,n),this.setParent(e),this._stack=0,this._startNow=this._startNow.bind(this),this._stopNow=this._stopNow.bind(this)}return l(t,[{key:"setParent",value:function(t){return this.$parent=$(t),this._stack>0&&this.$outer.appendTo(this.$parent),this}},{key:"detach",value:function(){return this.$outer.detach(),this}},{key:"start",value:function(t){return!1!==t&&(this.timeoutId=setTimeout(this._startNow,$.isNumeric(t)?+t:this.settings.startDelay)),this}},{key:"stop",value:function(t){return!1!==t&&setTimeout(this._stopNow,$.isNumeric(t)?+t:this.settings.stopDelay),this}},{key:"_startNow",value:function(){return 1==++this._stack&&(this.$spinner.removeClass("fa-times fa-check").addClass("fa-spinner fa-spin"),this.$outer.hide(),this.$outer.appendTo(this.$parent),this.$outer.fadeIn(this.settings.fadeDuration)),this}},{key:"_stopNow",value:function(){return 0==--this._stack&&(clearTimeout(this.timeoutId),this.timeoutId=void 0,this.$outer.fadeOut(this.settings.fadeDuration),this.$outer.detach()),this}},{key:"success",value:function(t){return clearTimeout(this.timeoutId),this.$spinner.removeClass("fa-spinner fa-spin").addClass("fa-check"),this.stop($.isNumeric(t)?+t:this.settings.successDelay),this}},{key:"error",value:function(t){return clearTimeout(this.timeoutId),this.$spinner.removeClass("fa-spinner fa-spin").addClass("fa-times"),this.stop($.isNumeric(t)?+t:this.settings.errorDelay),this}},{key:"errorCallback",value:function(t){return this.error.bind(this,t)}}]),t}(),v=new p(a.a,null,u);for(var g in p.prototype)!function(t){p.prototype.hasOwnProperty(t)&&(o[t]=function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];p.prototype[t].apply(v,n)})}(g)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=$('meta[name="csrf-token"]').attr("content")},function(t,e,n){"use strict";n.d(e,"f",function(){return o}),n.d(e,"e",function(){return r}),n.d(e,"a",function(){return s}),n.d(e,"d",function(){return a}),n.d(e,"c",function(){return l}),n.d(e,"b",function(){return c});var i=window,o=i.document,r=o.documentElement,s=o.body,a=$(i),l=$(o),c=($(r),$(s))},function(t,e,n){"use strict";function i(t,e,n){return function(){t.apply(e,n)}}function o(t,e){return i(t,e,[].slice.call(arguments,2))}function r(t,e,n,o){return setTimeout(i(e,n,o),t)}function s(t,e,n){return n?function(){var i=r(t,n,this,arguments);$(this).one(e,o(clearTimeout,null,i))}:o(r,null,t,e,this,arguments)}function a(t,e){return s(t,"mouseleave click",e)}function l(t){t.preventDefault()}function c(t){t.preventDefault(),t.stopImmediatePropagation()}function u(t,e){return function(n){return n&&"function"==typeof n.preventDefault&&n.preventDefault(),t.apply(e||this,arguments)}}function h(t,e){var n=new RegExp("\\{("+Object.keys(e).join("|")+")\\}","g");return t.replace(n,function(t,n){return e[n]})}function d(t){var e=t.indexOf("?");e>=0&&(t=t.slice(e+1));for(var n=t.split("&"),i={},o=void 0,r=n.length;r--;)o=n[r].split("="),i[o[0]]=o.length>1?$.isNumeric(o[1])?+o[1]:o[1]:null;return i}function f(t){switch(t.length){case 0:return{};case 1:return t[0]}t=t.slice();var e={},n=t.pop();for(var i in n)!function(i){t.some(function(t){return!(t.hasOwnProperty(i)&&t[i]===n[i])})||(e[i]=n[i])}(i);return e}function p(t){var e=t.split(/[^A-Za-z0-9]+/);t=e[0];for(var n=1,i=e.length;n<i;++n)t+=e[n].charAt(0).toUpperCase()+e[n].slice(1);return t}function v(t){var e=t.closest(".scrolling-context");return e.length?e:g.c}e.a=a,e.h=l,e.c=c,e.b=u,e.d=h,e.e=d,e.f=f,e.i=p,e.g=v;var g=n(3)},function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return r});var i=$({}),o=$.fn.on.bind(i),r=($.fn.one.bind(i),$.fn.trigger.bind(i))},function(t,e,n){"use strict";function i(t,e,n,o){if("boolean"!=typeof e)return i(t,!0,e,n);var r=-1/0,s=void 0;return e?function(){function e(){r=l,n.apply(i,a)}var i=o||this,a=arguments,l=+new Date;r+t<l&&e(),clearTimeout(s),s=setTimeout(e,t)}:function(){var e=+new Date;r+t<e&&(r=e,n.apply(o||this,arguments))}}function o(t,e,n,i){if("boolean"!=typeof e)return o(t,!0,e,n);var r=void 0,s=void 0;return e?function(){var e=arguments;i=i||this,clearTimeout(s),s=setTimeout(function(){n.apply(i,e)},t)}:function(){var e=+new Date;r+t<e&&n.apply(i||this,arguments),r=e}}e.b=i,e.a=o,n.d(e,"c",function(){return r});var r=function(t,e){return function(){var n=this,i=arguments;return new Promise(function(o){setTimeout(function(){return o(e.apply(n,i))},t)})}}},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"Collapsible",function(){return c});var o=n(3),r=n(14),s=n(4),a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l={cancelable:!0,persistent:!1,collapsed:!0},c=function(){function t(e,o){var a=this;i(this,t),this.$this=$(this),this.$elem=e instanceof $?e:$(e),this.settings=$.extend({},l,o),this.settings.cancelable&&(this._abortListener=this._abortListener.bind(this)),this.settings.persistent&&(this._storageId="collapsible."+(this.settings.storageId||this.$elem.data("storage-id")||this.$elem[0].id)),!o.hoverAnchor&&!o.focusAnchor||o.extendAnchor||(o.extendAnchor=o.hoverAnchor||o.focusAnchor);var c=function(){return a.$extendAnchor.trigger("click")};this.$anchors=null;for(var u=["toggle","collapse","extend","hover","focus"],h=0;h<u.length;h++){var d=u[h],f=d+"Anchor";if(o[f]){var p=o[f]instanceof $?o[f]:$(o[f]);if(p.length){switch(d){case"hover":p.mouseenter(n.i(s.a)(300,c));break;case"focus":p.focus(c);break;default:p.click(n.i(s.b)(this[d].bind(this)))}this.$anchors=this.$anchors?this.$anchors.add(p):p,this["$"+d+"Anchor"]=p}}}this.$elem.hasClass("collapsed")?this.collapsed=!0:this.$elem.hasClass("extended")?this.collapsed=!1:this.collapsed=this.settings.collapsed,this.settings.persistent&&r.has(this._storageId)&&r.get(this._storageId)!=this.collapsed&&this.toggle()}return a(t,[{key:"toggle",value:function(){return this.collapsed?this.extend():this.collapse()}},{key:"collapse",value:function(){return this.collapsed||(this.$this.trigger("willCollapse"),this.$elem.removeClass("extended").addClass("collapsed"),this.$anchors&&this.$anchors.removeClass("extended").addClass("collapsed"),this.settings.cancelable&&!this.collapsed&&o.b.off("click",this._abortListener),this.settings.persistent&&r.set(this._storageId,!0),this.collapsed=!0,this.$this.trigger("collapsed")),this}},{key:"extend",value:function(){return this.collapsed&&(this.$this.trigger("willExtend"),this.$elem.removeClass("collapsed").addClass("extended"),this.$anchors&&this.$anchors.removeClass("collapsed").addClass("extended"),this.settings.cancelable&&o.b.click(this._abortListener),this.settings.persistent&&r.set(this._storageId,!1),this.collapsed=!1,this.$this.trigger("extended")),this}},{key:"_abortListener",value:function(t){var e=$(t.target);e.closest(this.$elem).length||this.$anchors&&e.closest(this.$anchors).length||this.collapse()}},{key:"on",value:function(){return $.fn.on.apply(this.$this,arguments),this}},{key:"one",value:function(){return $.fn.one.apply(this.$this,arguments),this}},{key:"off",value:function(){return $.fn.off.apply(this.$this,arguments),this}}]),t}()},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"defaultSettings",function(){return c}),n.d(e,"Autocomplete",function(){return u});var o=n(3),r=n(4),s=n(6),a=n(1),l=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),c={minLength:3,maxSuggestions:7,maxPending:2,autoSubmit:!1,dropdownTemplate:'<ul class="autocomplete-dropdown" style="z-index:9999"></ul>',itemTemplate:'<li><a data-autocomplete-value="{value}">{label}</a></li>',emptyTemplate:'<li class="autocomplete-placeholder"><i class="fa fa-fw fa-code"></i>No results. Create?</li>',pendingTemplate:'<li class="autocomplete-placeholder">'+a.defaultTemplate+"</i>",moreInputTemplate:'<li class="autocomplete-placeholder">Keep typing…</li>',positionFixed:!0},u=function(){function t(e,r){i(this,t),this.$input=e instanceof $?e:$(e),this.settings=$.extend({},c,r),r.source||(this.settings.source=this.$input.data("autocomplete")),r.itemTemplateId&&(this.settings.itemTemplate=$("#"+r.itemTemplateId).text()),this.$dropdown=$(this.settings.dropdownTemplate).appendTo(this.settings.positionFixed?o.b:this.$input.offsetParent()),this._abortListener=this._abortListener.bind(this),this._keyNavigationListener=this._keyNavigationListener.bind(this),this._processReply=this._processReply.bind(this),this.suggestions=Object.create(null),this.pending=0,this.focusedId=-1,this.$input.on("focus propertychange input paste",n.i(s.b)(200,this.updateView.bind(this))).on("focus propertychange input paste",n.i(s.b)(390,this.updateSuggestions.bind(this))).attr("autocomplete","off")}return l(t,[{key:"updateSuggestions",value:function(){var t=this.$input[0].value;t in this.suggestions||t.length<this.settings.minLength||this.pending>=this.settings.maxPending||(this.pending++,this.suggestions[t]="pending",$.getJSON(this.settings.source,{term:t},this._processReply))}},{key:"_processReply",value:function(t){this.pending--,"pending"===this.suggestions[t.term]&&(this.suggestions[t.term]=t.results),this.updateView()}},{key:"updateView",value:function(){var t=this.$input[0].value,e=void 0,n=void 0;t.length?(t.length>=this.settings.minLength?(n=this.suggestions[t],n&&"pending"!==n?e=n.length?this.render(t,n):this.settings.emptyTemplate:(n=this.suggestions[t.slice(0,-1)],e=n&&"pending"!==n&&n.length?this.render(t,n):this.settings.pendingTemplate)):e=this.settings.moreInputTemplate,this.show(e)):this.hide()}},{key:"render",value:function(t,e){var i=new RegExp(t,"i"),o=e.slice(0,this.settings.maxSuggestions),s="",a=!0,l=!1,c=void 0;try{for(var u,h=o[Symbol.iterator]();!(a=(u=h.next()).done);a=!0){var d=u.value;d._origLabel||(d._origLabel=d.label),d.label=d._origLabel.replace(i,"<strong>$&</strong>"),s+=n.i(r.d)(this.settings.itemTemplate,d)}}catch(t){l=!0,c=t}finally{try{!a&&h.return&&h.return()}finally{if(l)throw c}}return s}},{key:"show",value:function(t){var e=this.$input.position(),n={display:"block",width:this.$input.outerWidth()};if(this.settings.positionFixed){var i=this.$input[0].getBoundingClientRect();n.top=i.top+i.height+$(window).scrollTop(),n.left=i.left}else n.top=e.top+this.$input.outerHeight(),n.left=e.left;this.$dropdown.html(t).css(n),this.anchors=$("a",this.$dropdown),this._addListeners()}},{key:"hide",value:function(){this._removeListeners(),this.$dropdown.hide().empty(),this.focusedId=-1}},{key:"clear",value:function(){this.hide(),this.suggestions=Object.create(null)}},{key:"focus",value:function(t){this.anchors&&(this.anchors.removeClass("focus").eq(t).addClass("focus"),this.focusedId=t)}},{key:"select",value:function(t){var e=$(t).data("autocomplete-value");this.$input.val(e),this.hide(),this.settings.select&&this.settings.select(e),this.settings.autoSubmit&&this.$input.submit()}},{key:"_addListeners",value:function(){this._listening||(this.$dropdown.on("click","a",this,this._clickSelectListener),this.$input.keydown(this._keyNavigationListener),o.b.click(this._abortListener),this._listening=!0)}},{key:"_removeListeners",value:function(){this._listening&&(this.$dropdown.off("click","a",this._clickSelectListener),this.$input.off("keydown",this._keyNavigationListener),o.b.off("click",this._abortListener),this._listening=!1)}},{key:"_keyNavigationListener",value:function(t){if(!t.isDefaultPrevented())if(40===t.keyCode||9===t.keyCode)t.preventDefault(),this.focus((this.focusedId+1)%this.anchors.length);else if(38===t.keyCode){t.preventDefault();var e=this.focusedId-1;this.focus(e<0?this.anchors.length-1:e%this.anchors.length)}else 13===t.keyCode&&this.focusedId>-1?(t.preventDefault(),this.select(this.anchors[this.focusedId])):27===t.keyCode&&(t.preventDefault(),this.hide(),this.$input.focus())}},{key:"_clickSelectListener",value:function(t){t.data.select(this)}},{key:"_abortListener",value:function(t){var e=$(t.target);e.closest(this.$dropdown).length||e.closest(this.$input).length||this.hide()}}]),t}()},function(t,e,n){"use strict";function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){var n=t[0].scrollbar;return n||(n=t[0].scrollbar=new v(t,e),d.push(n)),n}function a(t,e,n){var i=t[0].scrollbar;return(i instanceof v||i instanceof g)&&(i.remove(),i=!1),i||(i=t[0].scrollbar=new m(t,e,n),d.push(i)),i}function l(){d.forEach(function(t){t.update()})}e.a=s,e.b=a;var c=n(3),u=n(6),h=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),d=[],f=function(){var t=$('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo(c.b),e=t.children(),n=e.innerWidth()-e.height(99).innerWidth();return t.remove(),n}();c.d.resize(n.i(u.a)(100,l));var p=function(){function t(e,n){var i=this;r(this,t),this.$bar=n,this.$handle=$(".scroll-handle",n),this.contextElem=e[0],this.scrolling=!1,this.persistent=!1,this.update(),e.scroll(function(){return i.startScrolling(!0)}),this.$handle.mousedown(this._enterDraggableMode.bind(this)),this._drag=this._drag.bind(this)}return h(t,[{key:"startScrolling",value:function(t){return this._updateScrollPosition(),this.$bar.addClass("scrolling"),clearTimeout(this.scrolling),t&&!this.persistent?this.stopScrolling():this.persistent=!0,this}},{key:"stopScrolling",value:function(){return this.persistent=!1,this.scrolling=setTimeout(this.finishScrolling.bind(this),1e3),this}},{key:"finishScrolling",value:function(){return this.$bar.removeClass("scrolling"),this.scrolling=!1,this}},{key:"update",value:function(){var t=this;setTimeout(function(){return t._updateNow()},0)}},{key:"_updateFill",value:function(){return this.scale>=1?this.$bar.addClass("full"):this.$bar.removeClass("full"),this}},{key:"_enterDraggableMode",value:function(t){var e=this;this.dragStartPosition={top:t.screenY,left:t.screenX,scrollTop:this.contextElem.scrollTop,scrollLeft:this.contextElem.scrollLeft},c.d.one("mouseup",function(){c.d.off("mousemove",e._drag),e.$bar.removeClass("dragging")}).on("mousemove",this._drag),this.$bar.addClass("dragging")}},{key:"remove",value:function(){this.$bar.remove(),d.remove(this)}}]),t}(),v=function(t){function e(t,n){r(this,e),n||(n=$('<div class="scrollbar vertical"><div class="scroll-handle"></div></div>').insertAfter(t));var o=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return t.css({marginRight:-f}),o}return o(e,t),h(e,[{key:"_updateNow",value:function(){return this.scale=this.contextElem.clientHeight/this.contextElem.scrollHeight,this.$handle.css({height:100*this.scale+"%"}),this._updateScrollPosition()._updateFill()}},{key:"_updateScrollPosition",value:function(){return this.$handle.css({top:this.contextElem.scrollTop/this.contextElem.scrollHeight*100+"%"}),this}},{key:"_drag",value:function(t){this.contextElem.scrollTop=this.dragStartPosition.scrollTop+(t.screenY-this.dragStartPosition.top)/this.scale}}]),e}(p),g=function(t){function e(t,n){r(this,e),n||(n=$('<div class="scrollbar horizontal"><div class="scroll-handle"></div></div>').insertAfter(t));var o=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return t.css({marginBottom:-f}),o}return o(e,t),h(e,[{key:"_updateNow",value:function(){return this.scale=this.contextElem.clientWidth/this.contextElem.scrollWidth,this.$handle.css({width:100*this.scale+"%"}),this._updateScrollPosition()._updateFill()}},{key:"_updateScrollPosition",value:function(){return this.$handle.css({left:this.contextElem.scrollLeft/this.contextElem.scrollWidth*100+"%"}),this}},{key:"_drag",value:function(t){this.contextElem.scrollLeft=this.dragStartPosition.scrollLeft+(t.screenX-this.dragStartPosition.left)/this.scale}}]),e}(p),m=function(){function t(e,n,i){r(this,t),this.vertical=new v(e,n),this.horizontal=new g(e,i)}return h(t,[{key:"startScrolling",value:function(t){return this.vertical.startScrolling(t),this.horizontal.startScrolling(t),this}},{key:"stopScrolling",value:function(){return this.vertical.stopScrolling(),this.horizontal.stopScrolling(),this}},{key:"update",value:function(){var t=this;return setTimeout(function(){return t._updateNow()},0),this}},{key:"_updateNow",value:function(){return this.vertical._updateNow(),this.horizontal._updateNow(),this.vertical.scale>=1||this.horizontal.scale>=1?(this.vertical.$bar.removeClass("both"),this.horizontal.$bar.removeClass("both")):(this.vertical.$bar.addClass("both"),this.horizontal.$bar.addClass("both")),this}},{key:"remove",value:function(){return this.vertical.remove(),this.horizontal.remove(),this}}]),t}()},function(t,e,n){"use strict";function i(t,e){e=e||n.i(c.g)(t.first());var i=d.find(function(t){return e.is(t.context)});if(!i)return i={imgs:[],context:e},o(i,t),void(i.imgs&&(i.update=n.i(h.b)(100,r,i),i.context.scroll(i.update),d.push(i)));var s=!i.imgs;o(i,t),s&&i.imgs&&i.context.scroll(i.update)}function o(t,e){e instanceof HTMLImageElement?a(e)&&t.imgs.push(e):t.imgs=t.imgs.concat(e.toArray().filter(a))}function r(){this.imgs=this.imgs.filter(a),this.imgs||this.context.off("scroll",this.update)}function s(){for(var t=0,e=d.length;t<e;++t)d[t].update()}function a(t){if(l(t)){var e=new Image,n=t.getAttribute("data-src"),i=function i(){t.setAttribute("src",n),t.className+=" loaded",e.removeEventListener("load",i)};return e.addEventListener("load",i),e.src=n,!1}return!0}function l(t){var e=t.getBoundingClientRect();return e.bottom>=0&&e.top-f<=u.d.height()}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"preloadMargin",function(){return f}),e.add=i,e.update=s;var c=n(4),u=n(3),h=n(6),d=[],f=200;i($("img.lazyload")),s(),u.d.resize(n.i(h.a)(250,s))},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"Editor",function(){return u});var o=n(2),r=n(4),s=n(1),a=n(10),l=n(27),c=(n.n(l),function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}()),u=function(){function t(e){i(this,t),this.$this=$(this),this.$elem=e,this.$body=$(".editor-body",e),this.$textarea=$(".editor-textarea",e).focus(),this.originalContent=this.$textarea.val(),this.$textarea.on("propertychange input paste",this._triggerUpdate.bind(this)),this.$preview=$(".editor-preview",e),$(".editor-preview-button",e).click(this.showPreview.bind(this)),$(".editor-edit-button",e).click(this.showSource.bind(this));for(var o=["bold","italic","underline","strikethrough","image","quote","link","youtube","unordered-list","ordered-list","thumbnail","tag"],a=0;a<o.length;a++){var l=o[a];$(".editor-"+l,e).click(this[n.i(r.i)(l)].bind(this))}this.spinner=new s.Spinner(this.$preview)}return c(t,[{key:"showPreview",value:function(){var t=this;this.$body.off("transitionend").css({height:this.$body.height(),minHeight:0}),this.$textarea.prop("readonly",!0),this.$elem.addClass("editor-preview-mode"),this.spinner.setParent(this.$preview).start(),$.post(this.$elem.data("preview-url"),{raw:this.content(),_token:o.default}).then(function(e){t.spinner.stop(0),t.$preview.html(e),t.$body.height(t.$preview[0].offsetHeight),a.add($("img.lazyload",t.$preview))}).catch(function(){return t.spinner.error(!1)})}},{key:"showSource",value:function(){var t=this;this.$body.height(this.$textarea[0].offsetHeight),this.$textarea.prop("readonly",!1).focus(),this.$elem.removeClass("editor-preview-mode"),this.$body.on("transitionend",function(e){"height"===e.originalEvent.propertyName&&(t.$body.off("transitionend"),t.$preview.empty(),t.$body.css({height:"auto"}))})}},{key:"changed",value:function(){return this.$textarea.val()!==this.originalContent}},{key:"content",value:function(t){return void 0===t?this.$textarea.val():(this.$textarea.val(t),this)}},{key:"append",value:function(t){var e=this.$textarea.val();return e?this.$textarea.val(e+"\n"+t):this.$textarea.val(t),this._triggerUpdate()}},{key:"isEmpty",value:function(){return!this.$textarea.val()}},{key:"clear",value:function(){return this.$textarea.val("")}},{key:"focus",value:function(){return this.$textarea.focus(),this}},{key:"_triggerUpdate",value:function(){return this.$this.trigger("update",this.$textarea.val(),this.originalContent),this}},{key:"bold",value:function(){return this.$textarea.surroundSelectedText("**","**"),this._triggerUpdate()}},{key:"italic",value:function(){return this.$textarea.surroundSelectedText("*","*"),this._triggerUpdate()}},{key:"underline",value:function(){return this.$textarea.surroundSelectedText("__","__"),this._triggerUpdate()}},{key:"strikethrough",value:function(){return this.$textarea.surroundSelectedText("~~","~~"),this._triggerUpdate()}},{key:"quote",value:function(){return this.$textarea.surroundSelectedText("> ",""),this._triggerUpdate()}},{key:"image",value:function(){return this.$textarea.surroundSelectedText("![](",")"),this._triggerUpdate()}},{key:"link",value:function(){return this.$textarea.surroundSelectedText("[","]()"),this._triggerUpdate()}},{key:"unorderedList",value:function(){return this.$textarea.surroundSelectedText("* ",""),this._triggerUpdate()}},{key:"orderedList",value:function(){return this.$textarea.surroundSelectedText("1. ",""),this._triggerUpdate()}},{key:"youtube",value:function(){return this.$textarea.surroundSelectedText("{yt:","}"),this._triggerUpdate()}},{key:"thumbnail",value:function(){var t=this.$textarea.getSelection(),e=void 0,n=void 0;return t.length?(e=t.text.trim(),0===e.search(/[a-zA-Z0-9]{6}/)?this.$textarea.replaceSelectedText("["+e+"]","collapseToEnd"):(n=e.match(/\/w\/([a-zA-Z0-9]{6})$/))&&this.$textarea.replaceSelectedText("["+n[1]+"]","collapseToEnd")):this.$textarea.surroundSelectedText("[","]"),this._triggerUpdate()}},{key:"tag",value:function(){var t=this.$textarea.getSelection(),e=void 0,n=void 0;return t.length?(e=t.text.trim(),0===e.search(/^\d+$/)?this.$textarea.replaceSelectedText("#["+e+"]","collapseToEnd"):(n=e.match(/\/tag\/(\d+)$/))?this.$textarea.replaceSelectedText("#["+n[1]+"]","collapseToEnd"):0<=e.search(/\s/)?this.$textarea.replaceSelectedText("#{"+e+"}","collapseToEnd"):this.$textarea.replaceSelectedText("#"+e,"collapseToEnd")):this.$textarea.surroundSelectedText("#{","}"),this._triggerUpdate()}}]),t}()},function(t,e,n){"use strict";function i(t,e){c.html(t),c.forbidSubmit(),C=e,d=$("#tag-create-form"),f=$("#tag-create-name",d),p=$("#tag-create-alias",d),v=$("#tag-cat-select",d),g=$("li",v),m=$("#tag-output",d),y=$("#tag-name-output",d),b=$("#tag-cat-output",d),w=$("#tag-data-missing",d),k=f.val(),_=!1,x=!1,f.focus(),$(".submit",d).click(o),f.on("propertychange keyup input paste",n.i(h.b)(250,s)),$("#purity-checks input:radio",d).change(l),v.on("click","a",a),$("#add-tag-alias").click(function(){$(this).hide(),$("#tag-alias").show()})}function o(){if(!x)return!1;var t={tag_name:k,tag_alias:p.val(),tag_purity:$("input:radio[name=purity]:checked",d).val(),category_id:_,_token:u.default};$.post(d.attr("action"),t).done(function(t){t.status?(c.cancel(),C(k)):c.error(t.msg?t.msg:"Something went wrong")}).fail(function(){c.error("Something went wrong")})}function r(){k&&_?k.length<=90&&k.length>=3?(x=!0,f.removeClass("generic-error"),c.allowSubmit(),w.hide(),m.show()):(x=!1,f.addClass("generic-error"),c.forbidSubmit(),w.show(),m.hide()):(x=!1,c.forbidSubmit(),w.show(),m.hide())}function s(){k=f.val(),r(),y.text(k)}function a(t){t.preventDefault();var e=$(this),n=_;_=e.data("tag-cat-id"),n||r();var i=e.text()+" »";g.removeClass("selected subselected");var o=e.parent();if(o.addClass("selected"),o.hasClass("sub-tag-cat")){var s=o.parent().parent();s.addClass("subselected"),i=$("> a",s).text()+" » "+i}b.text(i)}function l(){y.removeClass("sfw sketchy nsfw").addClass($(this).val())}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var c=n(0),u=n(2),h=n(6),d=void 0,f=void 0,p=void 0,v=void 0,g=void 0,m=void 0,y=void 0,b=void 0,w=void 0,k=void 0,_=void 0,x=void 0,C=void 0},function(t,e,n){"use strict";function i(t){if((g.height()!=b||g.width()!=y||w>0)&&1===t.which){if(_)return void(_=!1);var e=void 0,n=void 0,i=void 0;if(w<2&&(e=g.width(),n=c(t),i=u(t)),p.removeClass(k[w]),w=(w+1)%3,p.addClass(k[w]),0===w?g.off("mousedown",o):1===w&&g.mousedown(o),w>0){var r=2==w?40:0,s=g.width()/e;v.scrollLeft((n.left+r)*s-i.left).scrollTop((n.top+r)*s-i.top)}T.update(),g.height()>v.height()?g.css({marginTop:0,marginBottom:0}):g.css({marginTop:"auto",marginBottom:"auto"})}}function o(t){1===t.which&&(t.preventDefault(),C={left:t.pageX,top:t.pageY},h.b.one("mousemove",r).one("mouseup",function(){h.b.off("mousemove",r)}))}function r(){_=!0,h.b.mousemove(a),g.addClass("panning"),h.b.one("mouseup",s)}function s(){h.b.off("mousemove",a),g.removeClass("panning")}function a(t){1===w?x?v.scrollTop(v.scrollTop()+C.top-t.pageY):v.scrollLeft(v.scrollLeft()+C.left-t.pageX):v.scrollLeft(v.scrollLeft()+C.left-t.pageX).scrollTop(v.scrollTop()+C.top-t.pageY),C={left:t.pageX,top:t.pageY}}function l(){x=v.width()/v.height()>y/b,g.removeClass().addClass("fill-"+(x?"horizontal":"vertical"))}function c(t){var e=g.offset();return{left:t.pageX-e.left,top:t.pageY-e.top}}function u(t){var e=v.offset();return{left:t.pageX-e.left,top:t.pageY-e.top}}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"$img",function(){return g}),n.d(e,"wallpaper_id",function(){return S});var h=n(3),d=n(9),f=n(5),p=(n(38),$("#showcase")),v=$("> .scrollbox",p),g=$("#wallpaper"),m=$(".showcase-fullscreen-toggle"),y=g.data("wallpaper-width"),b=g.data("wallpaper-height"),w=0,k=["fit","fill","full"],_=!1,x=void 0,C=void 0,S=g.data("wallpaper-id");g.click(i),h.d.resize(l),l();var T=n.i(d.b)(v);n.i(f.a)("sidebar.toggled",T.update.bind(T)),p.hasClass("mark-wallpaper-seen")&&n(18).add(S),m.click(function(){n(52).enter(p)}),n.i(f.a)("fullscreenchange",function(t,e){e===p[0]?p.addClass("fullscreen"):p.removeClass("fullscreen")})},function(t,e,n){"use strict";function i(t){return l.hasOwnProperty(c+t)}function o(t,e,n){return i(t)?JSON.parse(l.getItem(c+t)):(void 0===e||!n&&void 0!==n||r(t,e),e)}function r(t,e){l.setItem(c+t,JSON.stringify(e))}function s(t){l.removeItem(c+t)}function a(){l.clear()}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"store",function(){return l}),n.d(e,"prefix",function(){return c}),n.d(e,"onchange",function(){return h}),e.has=i,e.get=o,e.set=r,e.remove=s,e.flush=a;var l=window.localStorage,c="wallhaven.",u=$({});window.addEventListener("storage",function(t){0===t.key.indexOf(c)&&u.trigger(t.key.substr(10),[t.newValue,t])});var h=$.fn.on.bind(u)},function(t,e,n){"use strict";function i(){function t(){var t=document.getElementById("selected"),e=t.previousElementSibling;e&&(e.before(t),o(t),r())}function e(){var t=document.getElementById("selected"),e=document.getElementById("collection-list").firstChild.nextElementSibling;e&&(e.before(t),o(t),r())}function n(){var t=document.getElementById("selected"),e=t.nextElementSibling;e&&(e.after(t),o(t),r())}function i(){var t=document.getElementById("selected"),e=document.getElementById("collection-list").lastChild.previousElementSibling;e&&(e.after(t),o(t),r())}function o(t){document.getElementById("collection-list").firstChild.nextElementSibling==t?(a.classList.add("dead-button"),l.classList.add("dead-button")):(a.classList.remove("dead-button"),l.classList.remove("dead-button")),document.getElementById("collection-list").lastChild.previousElementSibling==t?(c.classList.add("dead-button"),u.classList.add("dead-button")):(c.classList.remove("dead-button"),u.classList.remove("dead-button"))}function r(){h=[],Array.from(document.getElementsByClassName("collection-to-move")).forEach(function(t){h.push(t.getAttribute("data-id"))}),document.getElementById("collection_ids").value=h}var s=document.getElementsByClassName("collection-to-move"),a=document.getElementById("coll-move-up"),l=document.getElementById("coll-move-top"),c=document.getElementById("coll-move-dn"),u=document.getElementById("coll-move-btm"),h=[];a.addEventListener("click",t),l.addEventListener("click",e),c.addEventListener("click",n),u.addEventListener("click",i);var d=function(){Array.from(s).forEach(function(t){t.classList.remove("selected"),t.removeAttribute("id")}),this.classList.add("selected"),this.id="selected";this.getAttribute("data-id");o(this)};Array.from(s).forEach(function(t){t.addEventListener("click",d),h.push(t.getAttribute("data-id"))})}Object.defineProperty(e,"__esModule",{value:!0}),e.init=i},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",function(){return s});var o=function(){function t(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{!i&&a.return&&a.return()}finally{if(o)throw r}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];i(this,t);var o=this.$root=e instanceof $?e:$(e);this.$resolutions=$('[name="respicker-resolution"]',o),this.$customWidth=$('[name="respicker-custom-width"]',o),this.$customHeight=$('[name="respicker-custom-height"]',o),this.allowMultiple=n,this.$resolutions.change(this.handleSelection.bind(this)),this.handleCustom=this.handleCustom.bind(this),this.$customWidth.on("propertychange keyup input paste",this.handleCustom),this.$customHeight.on("propertychange keyup input paste",this.handleCustom),this.detectResolution(),this.allowMultiple&&this.enableMultipleSelection()}return r(t,[{key:"activateResolutions",value:function(){for(var t=this,e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];n.forEach(function(e){var n=t.$resolutions.filter('[value="'+e+'"]');if(n.length)n.prop("checked",!0);else{var i=e.split("x"),r=o(i,2),s=r[0],a=r[1];t.$customWidth.val(s),t.$customHeight.val(a)}}),this.handleSelection(),this.handleCustom()}},{key:"onUpdate",value:function(){}},{key:"enableMultipleSelection",value:function(){this.allowMultiple=!0,this.$resolutions.attr("type","checkbox")}},{key:"disableMultipleSelection",value:function(){this.allowMultiple=!1,this.$resolutions.attr("type","radio"),this.handleSelection()}},{key:"handleSelection",value:function(){this.selectedCount&&!this.allowMultiple&&(this.$customWidth.val(""),this.$customHeight.val("")),this.onUpdate()}},{key:"handleCustom",value:function(){this.isCustomValid&&(this.allowMultiple||this.$resolutions.prop("checked",!1)),this.onUpdate()}},{key:"detectResolution",value:function(){if(void 0!==window.screen&&window.screen.width>0){var t=window.screen.width*window.devicePixelRatio,e=window.screen.height*window.devicePixelRatio;$(".respicker-native-info",this.$root).html("Your screen resolution is <strong><em>"+t+" × "+e+"</em></strong>.");var n=this.$resolutions.filter('[value="'+t+"x"+e+'"]');n.length&&n.addClass("respicker-native")}}},{key:"selectedCount",get:function(){return+this.$resolutions.filter(":checked").length}},{key:"selected",get:function(){return this.$resolutions.filter(":checked").toArray().map(function(t){return t.value.split("x")})}},{key:"customWidth",get:function(){return+this.$customWidth.val()}},{key:"customHeight",get:function(){return+this.$customHeight.val()}},{key:"custom",get:function(){return[this.customWidth,this.customHeight]}},{key:"isCustomValid",get:function(){var t=o(this.custom,2),e=t[0],n=t[1];return 0<=e&&e<=99999&&0<=n&&n<=99999&&!(0===e&&0===n)}},{key:"first",get:function(){return this.selected.length?this.selected[0]:this.isCustomValid?this.custom:void 0}},{key:"all",get:function(){var t=this.selected;return this.isCustomValid&&t.push(this.custom),t}}]),t}()},function(t,e,n){"use strict";function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(){var t="Ratio",e=$("input:checkbox:checked+label",k);e.length&&(t=e.first().text(),e.length>1&&(t+=",…")),T.text(t)}function l(){var t="Color",e=$("input:radio:checked",C);e.length&&e.first().val()?(t="#"+e.first().val(),E.css("background-color",t)):E.css("background-color",""),E.css("border-radius","3px")}function c(t,e){if(e){var n=document.createElement("input");n.type="hidden",n.name=t,n.value=e,g.append(n)}}Object.defineProperty(e,"__esModule",{value:!0});var u=n(7),h=n(0),d=n(16),f=n(2),p=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),v=function(){function t(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{!i&&a.return&&a.return()}finally{if(o)throw r}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),g=$("#header-search"),m=$("#header-search-text",g),y=$("#header-search-file",g),b=$("#searchbar"),w=$("#search-resolutions",b),k=$("#search-ratios",b),_=$("#search-sorting",b),x=$("#search-toplist-range",b),C=$("#search-colors",b),S=$(".dropdown-toggle",w),T=$(".dropdown-toggle",k),E=$(".dropdown-toggle",C),O=$(".dropdown-toggle",_),P=$(".dropdown-toggle",x),j=Object.create(null);window.location.search.replace(/^\?/,"").split("&").forEach(function(t){if(t){var e=t.split("="),n=v(e,2),i=n[0],o=n[1];j[i]=decodeURIComponent(o)}});var A=g.hasClass("header-search-type-text");$(".header-search-type-toggle").click(function(){g.toggleClass("header-search-type-text header-search-type-file"),A=!A}),y.change(function(){this.files[0].size>32e5?(g[0].reset(),n.i(h.error)("File is too big for search. Please keep them under 3MB")):(m.val(""),g.attr("method","POST"),g.attr("enctype","multipart/form-data"),g.append('<input type="hidden" name="_token" value="'+f.default+'" /> '),g.submit())}),b.hasClass("collapsed")&&new u.Collapsible(b,{focusAnchor:m}),new u.Collapsible($(".dropdown",w),{toggleAnchor:S}),new u.Collapsible($(".dropdown",k),{toggleAnchor:T}),new u.Collapsible($(".dropdown",C),{toggleAnchor:E}),new u.Collapsible($(".dropdown",_),{toggleAnchor:O}),new u.Collapsible($(".dropdown",x),{toggleAnchor:P});var D=new(function(t){function e(){o(this,e);var t=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"#search-resolutions .respicker"));return t.$limitation=$('[name="searchbar-respicker-limitation"]',b),t.$limitation.change(t.handleLimitation.bind(t)),t.handleLimitation(),"atleast"in j?t.activateResolutions(j.atleast):"resolutions"in j&&t.activateResolutions.apply(t,i(j.resolutions.split(","))),t}return s(e,t),p(e,[{key:"handleLimitation",value:function(){"atleast"===this.limitation?this.disableMultipleSelection():this.enableMultipleSelection(),this.onUpdate()}},{key:"onUpdate",value:function(){var t="Resolution",e=this.all;e.length&&(t=e[0].join("×"),"atleast"===this.limitation?t="≥ "+t:e.length>1&&(t+=" +"+(e.length-1))),S.text(t)}},{key:"limitation",get:function(){return this.$limitation.filter(":checked").val()}}]),e}(d.a));"ratios"in j&&j.ratios.split(",").forEach(function(t){$("#searchbar-ratio-"+t).prop("checked",!0)}),a(),$("input:checkbox",k).change(a),"colors"in j&&j.colors.split(",").forEach(function(t){$("#search-colors-"+t).prop("checked",!0)}),l(),$("input:radio",C).change(l),$("input:radio",_).change(function(){O.text($("+label",this).text())}),$("input:radio",x).change(function(){P.text($("+label",this).text())}),b.submit(function(t){t.preventDefault(),g.submit()}),g.submit(function(){A?(y.remove(),m.val()||m.prop("disabled",!0)):g.attr("method","POST"),c("categories",""+ +$("#search-general",b)[0].checked+ +$("#search-anime",b)[0].checked+ +$("#search-people",b)[0].checked);var t=$("#search-nsfw",b);if(c("purity",""+ +$("#search-sfw",b)[0].checked+ +$("#search-sketchy",b)[0].checked+ +(t.length?t[0].checked:"0")),"atleast"===D.limitation){var e=D.first;c("atleast",e?e.join("x"):"")}else c("resolutions",D.all.map(function(t){return t.join("x")}).join(","));c("ratios",$("input:checkbox:checked",k).toArray().pluck("value").join(",")),c("topRange",$("input:radio:checked",x).val()),c("sorting",$("input:radio:checked",_).val()),c("order",$("#search-order",_)[0].checked?"desc":"asc"),c("colors",$("input:radio:checked",C).val()),c("ai_art_filter",$("#search-ai")[0].checked?"0":"1")})},function(t,e,n){"use strict";function i(t){var e=$(".thumb",t);e.length&&(h=h||new l.a(c.get(u)),e.each(r),n.i(s.a)("infinite_scroll.appended",n.i(a.c)(135,function(t,e){$(".thumb",e).each(r)})),c.onchange(u,function(t,e){var n=new l.a(JSON.parse(e)),i=n.without(h),o=!0,r=!1,s=void 0;try{for(var a,c=i.values()[Symbol.iterator]();!(o=(a=c.next()).done);o=!0){var u=a.value,d=$(".thumb-"+u);d.length&&d.addClass("thumb-seen")}}catch(t){r=!0,s=t}finally{try{!o&&c.return&&c.return()}finally{if(r)throw s}}h=n}))}function o(){c.remove(u)}function r(){var t=$(this),e=t.data("wallpaper-id").toString();h.contains(e)&&t.addClass("thumb-seen")}Object.defineProperty(e,"__esModule",{value:!0}),e.init=i,e.reset=o,n.d(e,"add",function(){return d});var s=n(5),a=n(6),l=n(50),c=n(14),u="seen-wallpapers",h=void 0;i();var d=n.i(a.c)(500,function(t){h=h||new l.a(c.get(u));var e=h.add(t);return e&&c.set(u,h.values()),e})},function(t,e,n){"use strict";function i(){for(var t=v.length;t--;)v[t].select()}function o(){p.slice(0).forEach(function(t){t.deselect()})}function r(){var t=p.slice(0);i(),t.forEach(function(t){t.deselect()})}function s(){var t=p.length;f.text(t==g?"All":t)}function a(){return v}function l(){return p}function c(t){for(var e=0,n=v.length;e<n;++e)if(v[e].id==t)return v[e]}function u(t){this.elem=t,this.$this=$(this),this.$elem=$(t),this.purityElem=$(".purity",this),this.categoryElem=$(".category",this),this._assignData(this.$elem.data("wallpaper-data")),this.src=$("img",this.$elem).data("src"),this.selected=!1,this.$elem.on("click",".select",this.toggleSelect.bind(this))}n.d(e,"d",function(){return a}),n.d(e,"b",function(){return l}),n.d(e,"c",function(){return c}),n.d(e,"a",function(){return i});var h=n(5),d=$("#thumbs"),f=$("#selection-count"),p=[],v=void 0,g=void 0,m={copy:{value:function(){for(var t=[],e=this.length;e--;)t[e]=this[e];return Object.defineProperties(t,m)}},ids:{value:function(){return this.pluck("id")}},elems:{value:function(){return $(this.pluck("elem"))}},setPurity:{value:function(t){for(var e=0,n=this.length;e<n;++e)this[e].setPurity(t);return this}},setCategory:{value:function(t){for(var e=0,n=this.length;e<n;++e)this[e].setCategory(t);return this}},setSource:{value:function(t){for(var e=0,n=this.length;e<n;++e)this[e].setSource(t);return this}}};u.prototype={select:function(){return this.selected||(this.$elem.removeClass("deselected").addClass("selected"),this.selected=!0,p.push(this),n.i(h.b)("thumbselector.selected",[this,p])),this},deselect:function(){if(this.selected){this.$elem.removeClass("selected").addClass("deselected"),this.selected=!1;var t=p.indexOf(this);-1!==t&&p.splice(t,1),n.i(h.b)("thumbselector.deselected",[this,p])}return this},toggleSelect:function(){return this.selected?this.deselect():this.select()},setPurity:function(t){return this.purity=t,this.$elem.removeClass("thumb-sfw thumb-sketchy thumb-nsfw").addClass("thumb-"+t),this},setCategory:function(t){return this.category=t,this.$elem.removeClass("thumb-anime thumb-general thumb-people").addClass("thumb-"+t),this},setSource:function(t){return this.source=t,this},_assignData:function(t){for(var e=Object.getOwnPropertyNames(t),n=e.length;n--;)this.hasOwnProperty(e[n])||(this[e[n]]=t[e[n]])}},function(){v=$(".thumb",d).toArray().map(function(t){return new u(t)}),g=v.length,Object.defineProperties(v,m),Object.defineProperties(p,m),$(".select-all").click(i),$(".clear-selection").click(o),$(".invert-selection").click(r),n.i(h.a)("thumbselector.selected thumbselector.deselected",s)}()},function(t,e,n){"use strict";function i(){}function o(t){return d.hasOwnProperty(t)?d[t]:i}Object.defineProperty(e,"__esModule",{value:!0});var r=n(28),s=(n.n(r),n(0)),a=n(44),l=n(10),c=(n(45),n(17),n(4)),u=n(3),h=n(26);n.n(h);console.log("Welcome to     _ _ _\n__      ____ _| | | |__   __ ___   _____ _ __\n\\ \\ /\\ / / _` | | | '_ \\ / _` \\ \\ / / _ \\ '_ \\\n \\ V  V / (_| | | | | | | (_| |\\ V /  __/ | | |\n  \\_/\\_/ \\__,_|_|_|_| |_|\\__,_| \\_/ \\___|_| |_|");var d={autocomplete:function(){return n(8)},collapsible:function(){return n(7)},column_navigation:function(){return n(30)},csrf_token:function(){return n(2)},editor:function(){return n(11)},favorites:function(){return n(31)},forum_thread:function(){return n(33)},infinite_scroll:function(){return n(35)},overlay:function(){return s},private_messages:function(){return n(36)},profile:function(){return n(37)},searchbar:function(){return n(17)},showcase:function(){return n(13)},tag_create_form:function(){return n(12)},sidebars:function(){return n(40)},storage:function(){return n(14)},thumbmarker:function(){return n(18)},thumblist:function(){return a},thumbloader:function(){return l},upload:function(){return n(46)},uploading:function(){return n(47)},userpanel:function(){return n(49)},auth:function(){return n(29)},home:function(){return n(34)},"favorites-order":function(){return n(15)}};window.wh=window.wallhaven={modules_map:d,load:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=!0,r=!1,s=void 0;try{for(var a,l=e[Symbol.iterator]();!(i=(a=l.next()).done);i=!0){o(a.value)()}}catch(t){r=!0,s=t}finally{try{!i&&l.return&&l.return()}finally{if(r)throw s}}},require:function(t){return o(t)()}},$.fx.speeds._default=300,$(function(){u.b.removeClass("preload")});var f=$("#notifications");if(f.length){var p=function(){f.fadeOut().off().remove()};f.click(p),setTimeout(p,5e3)}var v=$(".localAnchor:not(a)");v.length&&v.each(function(){var t=$(this);if(!t.children().length){var e=t.text(),n=this.id||e.replace(/['"]|\W+$/g,"").replace(/\W+/g,"-");t.addClass("localAnchor").attr("id",n).html('<a href="#'+n+'">'+e+"</a>")}}),location.hash&&document.getElementById(location.hash.slice(1))&&$(function(){return scrollBy(0,-60)});var g=$("#shortform-purity");g.length&&g.submit(function(t){t.preventDefault();var e=""+ +$("#sfw").prop("checked")+ +$("#sketchy").prop("checked")+(+$("#nsfw").prop("checked")||0);window.location=this.action+"?purity="+e});var m=$("#forum-search-form");m.length&&m.focusin(function(){m.addClass("active")}),$(".collapsible-text").click(function(t){var e=$("#"+$(this).data("target"));e.hasClass("collapsed")?e.removeClass("collapsed"):e.addClass("collapsed")});var y=$("input[type='text'][readonly]");y.length&&y.click(function(){var t=this;setTimeout(function(){t.select()},0)});var b=$(".dummy");b.length&&b.click(function(t){return n.i(c.c)(t),s.error("This feature hasn't been implemented yet :/<br />But hey, we're working on it!"),!1}),$("[title]",document.body).tipsy({delayIn:500,delayOut:500,fade:!0})},,function(t,e){},,function(t,e,n){"use strict";n.d(e,"a",function(){return o});var i=n(25),o=(n.n(i),function(t){if(!(void 0===t||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var e=t.document,n=function(){return t.URL||t.webkitURL||t},i=e.createElementNS("http://www.w3.org/1999/xhtml","a"),o="download"in i,r=function(t){var e=new MouseEvent("click");t.dispatchEvent(e)},s=/constructor/i.test(t.HTMLElement)||t.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent),l=function(e){(t.setImmediate||t.setTimeout)(function(){throw e},0)},c=function(t){var e=function(){"string"==typeof t?n().revokeObjectURL(t):t.remove()};setTimeout(e,4e4)},u=function(t,e,n){e=[].concat(e);for(var i=e.length;i--;){var o=t["on"+e[i]];if("function"==typeof o)try{o.call(t,n||t)}catch(t){l(t)}}},h=function(t){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t},d=function(e,l,d){d||(e=h(e));var f,p=this,v=e.type,g="application/octet-stream"===v,m=function(){u(p,"writestart progress write writeend".split(" "))};if(p.readyState=p.INIT,o)return f=n().createObjectURL(e),void setTimeout(function(){i.href=f,i.download=l,r(i),m(),c(f),p.readyState=p.DONE});!function(){if((a||g&&s)&&t.FileReader){var i=new FileReader;return i.onloadend=function(){var e=a?i.result:i.result.replace(/^data:[^;]*;/,"data:attachment/file;");t.open(e,"_blank")||(t.location.href=e),e=void 0,p.readyState=p.DONE,m()},i.readAsDataURL(e),void(p.readyState=p.INIT)}if(f||(f=n().createObjectURL(e)),g)t.location.href=f;else{t.open(f,"_blank")||(t.location.href=f)}p.readyState=p.DONE,m(),c(f)}()},f=d.prototype,p=function(t,e,n){return new d(t,e||t.name||"download",n)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(t,e,n){return e=e||t.name||"download",n||(t=h(t)),navigator.msSaveOrOpenBlob(t,e)}:(f.abort=function(){},f.readyState=f.INIT=0,f.WRITING=1,f.DONE=2,f.error=f.onwritestart=f.onprogress=f.onwrite=f.onabort=f.onerror=f.onwriteend=null,p)}}(window))},function(t,e){/*! @source http://purl.eligrey.com/github/canvas-toBlob.js/blob/master/canvas-toBlob.js */
var n,i=window.Uint8Array,o=window.HTMLCanvasElement,r=o&&o.prototype,s=/\s*;\s*base64\s*(?:;|$)/i,a="toDataURL",l=function(t){for(var e,o,r=t.length,s=new i(r/4*3|0),a=0,l=0,c=[0,0],u=0,h=0;r--;)o=t.charCodeAt(a++),255!==(e=n[o-43])&&void 0!==e&&(c[1]=c[0],c[0]=o,h=h<<6|e,4===++u&&(s[l++]=h>>>16,61!==c[1]&&(s[l++]=h>>>8),61!==c[0]&&(s[l++]=h),u=0));return s};i&&(n=new i([62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,0,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51])),!o||r.toBlob&&r.toBlobHD||(r.toBlob||(r.toBlob=function(t,e){if(e||(e="image/png"),this.mozGetAsFile)return void t(this.mozGetAsFile("canvas",e));if(this.msToBlob&&/^\s*image\/png\s*(?:$|;)/i.test(e))return void t(this.msToBlob());var n,o=Array.prototype.slice.call(arguments,1),r=this[a].apply(this,o),c=r.indexOf(","),u=r.substring(c+1),h=s.test(r.substring(0,c));Blob.fake?(n=new Blob,n.encoding=h?"base64":"URI",n.data=u,n.size=u.length):i&&(n=h?new Blob([l(u)],{type:e}):new Blob([decodeURIComponent(u)],{type:e})),t(n)}),!r.toBlobHD&&r.toDataURLHD?r.toBlobHD=function(){a="toDataURLHD";var t=this.toBlob();return a="toDataURL",t}:r.toBlobHD=r.toBlob)},function(t,e){!function(t){function e(t,e){return"function"==typeof t?t.call(e):t}function n(t){for(;t=t.parentNode;)if(t==document)return!0;return!1}function i(e,n){this.$element=t(e),this.options=n,this.enabled=!0,this.fixTitle()}i.prototype={show:function(){var n=this.getTitle();if(n&&this.enabled){var i=this.tip();i.find(".tipsy-inner")[this.options.html?"html":"text"](n),i[0].className="tipsy",i.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).prependTo(document.body);var o,r=t.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight}),s=i[0].offsetWidth,a=i[0].offsetHeight,l=e(this.options.gravity,this.$element[0]);switch(l.charAt(0)){case"n":o={top:r.top+r.height+this.options.offset,left:r.left+r.width/2-s/2};break;case"s":o={top:r.top-a-this.options.offset,left:r.left+r.width/2-s/2};break;case"e":o={top:r.top+r.height/2-a/2,left:r.left-s-this.options.offset};break;case"w":o={top:r.top+r.height/2-a/2,left:r.left+r.width+this.options.offset}}2==l.length&&("w"==l.charAt(1)?o.left=r.left+r.width/2-15:o.left=r.left+r.width/2-s+15),i.css(o).addClass("tipsy-"+l),i.find(".tipsy-arrow")[0].className="tipsy-arrow tipsy-arrow-"+l.charAt(0),this.options.className&&i.addClass(e(this.options.className,this.$element[0])),this.options.fade?i.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:this.options.opacity}):i.css({visibility:"visible",opacity:this.options.opacity})}},hide:function(){this.options.fade?this.tip().stop().fadeOut(function(){t(this).remove()}):this.tip().remove()},fixTitle:function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("original-title"))&&t.attr("original-title",t.attr("title")||"").removeAttr("title")},getTitle:function(){var t,e=this.$element,n=this.options;this.fixTitle();var t,n=this.options;return"string"==typeof n.title?t=e.attr("title"==n.title?"original-title":n.title):"function"==typeof n.title&&(t=n.title.call(e[0])),(t=(""+t).replace(/(^\s*|\s*$)/,""))||n.fallback},tip:function(){return this.$tip||(this.$tip=t('<div class="tipsy"></div>').html('<div class="tipsy-arrow"></div><div class="tipsy-inner"></div>'),this.$tip.data("tipsy-pointee",this.$element[0])),this.$tip},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled}},t.fn.tipsy=function(e){function n(n){var o=t.data(n,"tipsy");return o||(o=new i(n,t.fn.tipsy.elementOptions(n,e)),t.data(n,"tipsy",o)),o}function o(){var t=n(this);t.hoverState="in",0==e.delayIn?t.show():(t.fixTitle(),setTimeout(function(){"in"==t.hoverState&&t.show()},e.delayIn))}function r(){var t=n(this);t.hoverState="out",0==e.delayOut?t.hide():setTimeout(function(){"out"==t.hoverState&&t.hide()},e.delayOut)}if(!0===e)return this.data("tipsy");if("string"==typeof e){var s=this.data("tipsy");return s&&s[e](),this}if(e=t.extend({},t.fn.tipsy.defaults,e),e.live||this.each(function(){n(this)}),"manual"!=e.trigger){var a=e.live?"live":"bind",l="hover"==e.trigger?"mouseenter":"focus",c="hover"==e.trigger?"mouseleave":"blur";this[a](l,o)[a](c,r)}return this},t.fn.tipsy.defaults={className:null,delayIn:0,delayOut:0,fade:!1,fallback:"",gravity:"n",html:!1,live:!1,offset:0,opacity:.8,title:"title",trigger:"hover"},t.fn.tipsy.revalidate=function(){t(".tipsy").each(function(){var e=t.data(this,"tipsy-pointee");e&&n(e)||t(this).remove()})},t.fn.tipsy.elementOptions=function(e,n){return t.metadata?t.extend({},n,t(e).metadata()):n},t.fn.tipsy.autoNS=function(){return t(this).offset().top>t(document).scrollTop()+t(window).height()/2?"s":"n"},t.fn.tipsy.autoWE=function(){return t(this).offset().left>t(document).scrollLeft()+t(window).width()/2?"e":"w"},t.fn.tipsy.autoBounds=function(e,n){return function(){var i={ns:n[0],ew:n.length>1&&n[1]},o=t(document).scrollTop()+e,r=t(document).scrollLeft()+e,s=t(this);return s.offset().top<o&&(i.ns="n"),s.offset().left<r&&(i.ew="w"),t(window).width()+t(document).scrollLeft()-s.offset().left<e&&(i.ew="e"),t(window).height()+t(document).scrollTop()-s.offset().top<e&&(i.ns="s"),i.ns+(i.ew?i.ew:"")}}}(jQuery)},function(t,e){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};/**
 * @license Rangy Inputs, a jQuery plug-in for selection and caret manipulation within textareas and text inputs.
 * 
 * https://github.com/timdown/rangyinputs
 *
 * For range and selection features for contenteditable, see Rangy.

 * http://code.google.com/p/rangy/
 *
 * Depends on jQuery 1.0 or later.
 *
 * Copyright 2014, Tim Down
 * Licensed under the MIT license.
 * Version: 1.2.0
 * Build date: 30 November 2014
 */
!function(t){function e(t,e){var i=n(t[e]);return"function"===i||!("object"!=i||!t[e])||"unknown"==i}function i(t,e){return n(t[e])!=y}function o(t,e){return!("object"!=n(t[e])||!t[e])}function r(t){window.console&&window.console.log&&window.console.log("RangyInputs not supported in your browser. Reason: "+t)}function s(t,e,i){return e<0&&(e+=t.value.length),(void 0===i?"undefined":n(i))==y&&(i=e),i<0&&(i+=t.value.length),{start:e,end:i}}function a(t,e,n){return{start:e,end:n,length:n-e,text:t.value.slice(e,n)}}function l(){return o(document,"body")?document.body:document.getElementsByTagName("body")[0]}var c,u,h,d,f,p,v,g,m,y="undefined";t(document).ready(function(){function b(t,e){var n=t.value,i=c(t),o=i.start;return{value:n.slice(0,o)+e+n.slice(i.end),index:o,replaced:i.text}}function $(t,e){t.focus();var n=c(t);return u(t,n.start,n.end),""==e?document.execCommand("delete",!1,null):document.execCommand("insertText",!1,e),{replaced:n.text,index:n.start}}function w(t,e){t.focus();var n=b(t,e);return t.value=n.value,n}function k(t,e){return function(){var n=this.jquery?this[0]:this,i=n.nodeName.toLowerCase();if(1==n.nodeType&&("textarea"==i||"input"==i&&/^(?:text|email|number|search|tel|url|password)$/i.test(n.type))){var o=[n].concat(Array.prototype.slice.call(arguments)),r=t.apply(this,o);if(!e)return r}if(e)return this}}var _=document.createElement("textarea");if(l().appendChild(_),i(_,"selectionStart")&&i(_,"selectionEnd"))c=function(t){return a(t,t.selectionStart,t.selectionEnd)},u=function(t,e,n){var i=s(t,e,n);t.selectionStart=i.start,t.selectionEnd=i.end},m=function(t,e){e?t.selectionEnd=t.selectionStart:t.selectionStart=t.selectionEnd};else{if(!(e(_,"createTextRange")&&o(document,"selection")&&e(document.selection,"createRange")))return l().removeChild(_),void r("No means of finding text input caret position");c=function(t){var e,n,i,o,r=0,s=0,l=document.selection.createRange();return l&&l.parentElement()==t&&(i=t.value.length,e=t.value.replace(/\r\n/g,"\n"),n=t.createTextRange(),n.moveToBookmark(l.getBookmark()),o=t.createTextRange(),o.collapse(!1),n.compareEndPoints("StartToEnd",o)>-1?r=s=i:(r=-n.moveStart("character",-i),r+=e.slice(0,r).split("\n").length-1,n.compareEndPoints("EndToEnd",o)>-1?s=i:(s=-n.moveEnd("character",-i),s+=e.slice(0,s).split("\n").length-1))),a(t,r,s)};var x=function(t,e){return e-(t.value.slice(0,e).split("\r\n").length-1)};u=function(t,e,n){var i=s(t,e,n),o=t.createTextRange(),r=x(t,i.start);o.collapse(!0),i.start==i.end?o.move("character",r):(o.moveEnd("character",x(t,i.end)),o.moveStart("character",r)),o.select()},m=function(t,e){var n=document.selection.createRange();n.collapse(e),n.select()}}l().removeChild(_);var C=function(t,e){var n=b(t,e);try{var i=$(t,e);if(t.value==n.value)return C=$,i}catch(t){}return C=w,t.value=n.value,n};d=function(t,e,n,i){e!=n&&(u(t,e,n),C(t,"")),i&&u(t,e)},h=function(t){u(t,C(t,"").index)},g=function(t){var e=C(t,"");return u(t,e.index),e.replaced};var S=function(t,e,n,i){var o=e+n.length;if(("collapsetoend"==(i="string"==typeof i?i.toLowerCase():"")||"select"==i)&&/[\r\n]/.test(n)){var r=n.replace(/\r\n/g,"\n").replace(/\r/g,"\n");o=e+r.length;var s=e+r.indexOf("\n");"\r\n"==t.value.slice(s,s+2)&&(o+=r.match(/\n/g).length)}switch(i){case"collapsetostart":u(t,e,e);break;case"collapsetoend":u(t,o,o);break;case"select":u(t,e,o)}};f=function(t,e,n,i){u(t,n),C(t,e),"boolean"==typeof i&&(i=i?"collapseToEnd":""),S(t,n,e,i)},p=function(t,e,n){var i=C(t,e);S(t,i.index,e,n||"collapseToEnd")},v=function(t,e,i,o){(void 0===i?"undefined":n(i))==y&&(i=e);var r=c(t),s=C(t,e+r.text+i);S(t,s.index+e.length,r.text,o||"select")},t.fn.extend({getSelection:k(c,!1),setSelection:k(u,!0),collapseSelection:k(m,!0),deleteSelectedText:k(h,!0),deleteText:k(d,!0),extractSelectedText:k(g,!1),insertText:k(f,!0),replaceSelectedText:k(p,!0),surroundSelectedText:k(v,!0)})})}(jQuery)},function(t,e){function n(t,e){o[t]||Object.defineProperty(o,t,{value:e})}var i=Array.isArray,o=Array.prototype;n("toArray",function(){return this}),n("contains",function(t){return-1<this.indexOf(t)}),n("remove",function(t){var e=this.indexOf(t);return-1!==e&&this.splice(e,1),this}),n("equals",function(t){if(!i(t))return!1;var e=this.length;if(e!==t.length)return!1;for(var n=0;n<e;++n)if(i(this[n])&&i(t[n])){if(!this[n].equals(t[n]))return!1}else if(this[n]!=t[n])return!1;return!0}),n("unique",function(){for(var t=[],e=0,n=this.length;e<n;++e)t.indexOf(this[e])<0&&t.push(this[e]);return t}),n("flatten",function(){for(var t=[],e=0,n=this.length;e<n;++e)i(this[e])?t=t.concat(this[e].flatten()):t.push(this[e]);return t}),n("pluck",function t(){var e,n=[],i=o.slice.apply(arguments);i=i.shift().split(".").concat(i),e=i.shift();for(var r=0,s=this.length;r<s;++r)null!==this[r]&&void 0!==this[r]&&n.push(this[r][e]);return i.length?t.apply(n,i):n}),n("find",function(t){for(var e=0,n=this.length;e<n;++e)if(t(this[e]))return this[e]}),n("mapConstructor",function(t){for(var e=[],n=0,i=this.length;n<i;++n)e[n]=new t(this[n]);return e})},function(t,e){$("#password_confirmation").focusout(function(){$("#password").val()!==$("#password_confirmation").val()?$("#password_confirmation").addClass("invalid"):$("#password_confirmation").removeClass("invalid")})},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"ColumnNavigation",function(){return r});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(e){var n=this;i(this,t);var o=!0,r=!1,s=void 0;try{for(var a,l=e[Symbol.iterator]();!(o=(a=l.next()).done);o=!0)!function(){var t=a.value,e=$("#"+t+"-subnav");n.$subnavs=n.$subnavs?n.$subnavs.add(e):e,$("#"+t+"-subnav-toggle").click(function(){return n.active(t)})}()}catch(t){r=!0,s=t}finally{try{!o&&l.return&&l.return()}finally{if(r)throw s}}}return o(t,[{key:"active",value:function(t){this.$subnavs.addClass("collapsed"),$("#"+t+"-subnav").removeClass("collapsed")}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(4),o=n(1),r=n(0),s=n(2),a=$("#thumbs"),l=$(".collections-list"),c=$(".collection",l),u=l.data("target"),h=!1;l.on("dragover",".collection",i.h).on("dragenter",".collection",function(){h&&(c.removeClass("droppable"),$(this).addClass("droppable"))}).on("drop",".collection",n.i(i.b)(function(){var t=h,e=$(this).data("collection-id")||-1;t&&e&&!$(this).hasClass("active")&&(o.globalSpinner.start(),$.post(u,{wallpaper_id:t,collection_id:e,_token:s.default}).fail(r.errorCallback()).done(function(n){if(n.status){$(".thumb-"+t).remove();var i=l.find(".active small"),s=$("#collection-"+e+" small");i.length&&i.text(+i.text()-1),s.length&&s.text(+s.text()+1),o.globalSpinner.success()}else r.error(n.msg)}))})),a.on("drop",i.h).on("dragover",".thumb",i.h).on("dragstart",".thumb",function(t){var e=$(this),n=t.originalEvent.offsetX||0,i=t.originalEvent.offsetY||0,o=+e.css("margin-top")||0;h=e.data("wallpaper-id"),e.addClass("dragging"),t.originalEvent.dataTransfer.setDragImage(this,n+o,i+o)}).on("dragend",".thumb",function(){$(this).removeClass("dragging"),h=!1,c.removeClass("droppable")});var d=$("#collections-reorder-btn");d&&d.click(function(t){t.preventDefault(),r.fetchView(d.data("href")).then(n(15).init)})},function(t,e,n){"use strict";function i(t){var e=$("#wallpaper-report-form",t);c=$(".report-reason",e),u=$("#report-info",e),h=$(".report-info-explanation",e),f=$(".report-duplicate-info",e),p=$("#report-duplicate-info-input",f),v=$("#report-duplicate-ids",f),g=$(".form-feedback",f),y=g.text(),c.on("change",o),u.on("propertychange input paste",n.i(a.a)(150,s)),p.on("propertychange input paste",n.i(a.a)(150,r)),l.forbidSubmit()}function o(){d=$(this).hasClass("report-requires-info"),d?u.attr("required","required"):u.attr("required",!1),m="duplicate"===this.value,m?(f.attr("required","required").show(),r()):f.attr("required",!1).hide(),h.hide(),$(".report-"+this.value.replace(" ","-")+"-explanation").show(),s()}function r(){var t=p[0].value.match(/\b[a-zA-Z0-9]{6}\b/g);t?(v.val("["+t.join("], [")+"]"),g.text("Wallpaper IDs: "+t.join(", "))):(v.val(""),g.text(y)),s()}function s(){l.allowSubmit((!d||u[0].value)&&(!m||v[0].value))}Object.defineProperty(e,"__esModule",{value:!0}),e.init=i;var a=n(6),l=n(0),c=void 0,u=void 0,h=void 0,d=!1,f=void 0,p=void 0,v=void 0,g=void 0,m=!1,y=void 0},function(t,e,n){"use strict";function i(){l.show(),u=new r.Editor($(".editor",l)),c.push(u);var t=$(".submit",l);$(u).on("update",function(){t.prop("disabled",!u.changed()||u.isEmpty())}),$(".abort",l).click(function(){l.hide(),c.remove(u),a.show()})}Object.defineProperty(e,"__esModule",{value:!0});var o=n(1),r=n(11),s=$(".forum-posts"),a=$(".forum-reply-button"),l=$("#forum-reply-editor"),c=[],u=void 0;s.on("click",".forum-post-edit",function(t){t.preventDefault(),o.globalSpinner.start();var e=$(this).hide(),n=e.closest(".forum-post"),i=$(".forum-post-content",n),s=$(".forum-post-body",i),a=$(".forum-post-footer",i);$.get(this.href).fail(o.globalSpinner.errorCallback()).done(function(t){if(t&&t.view){o.globalSpinner.stop(0),s.hide(),a.hide();var n=$(t.view),l=$(".submit",n),u=new r.Editor($(".editor",n));c.push(u),i.append(n),$(u).on("update",function(){u.changed()&&!u.isEmpty()?l.prop("disabled",!1):l.prop("disabled",!0)}),$(".abort",n).click(function(){n.remove(),s.show(),a.show(),c.remove(u),e.show()})}else o.globalSpinner.error()})}),a.click(function(t){t.preventDefault(),a.hide(),u?(l.show(),c.push(u.focus())):i()}),$(".forum-post-quote").click(function(t){t.preventDefault(),o.globalSpinner.start(),$.get(this.href).then(function(t){o.globalSpinner.stop(0),c.length||i();for(var e=c.length;e--;)c[e].showSource(),c[e].append(t)}).catch(o.globalSpinner.errorCallback())}),s.on("click",".forum-post-body img",function(){$(this).closest("a, .thumb").length||window.open(this.src,"_blank")}),s.on("click",".forum-post-deleted-placeholder",function(){s.find("#post-"+$(this).data("post-id")).addClass("show")})},function(t,e){$("#search-text").focusin(function(){$(this).parent().css("background","rgba(255, 255, 255, 0.2)"),$(this).parent().css("box-shadow","2px 4px 4px rgba(0, 0, 0, 0.6)")}),$("#search-text").focusout(function(){$(this).parent().css("background","rgba(255, 255, 255, 0.1)"),$(this).parent().css("box-shadow","2px 2px 4px rgba(0, 0, 0, 0.6)")})},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"InfiniteScroll",function(){return d});var o=n(3),r=n(4),s=n(6),a=n(10),l=n(1),c=n(5),u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),h=$('meta[name="max-pages"]').attr("content"),d=function(){function t(e){i(this,t),this.$elem=$(e),this.$context=n.i(r.g)(this.$elem);var a=$(".pagination",this.$elem);if(a.length){a.detach();var u=a.data("pagination");u.page>=u.total||(this.page=u.current,this.total=u.total,this.url=u.url,this.pages=this.$elem.children().length,this.queue=0,this.spinner=n.i(l.default)().setParent(this.$elem),this.appendPage=this.appendPage.bind(this),this.updateTriggerDistance=this.updateTriggerDistance.bind(this),o.d.on("resize",n.i(s.a)(250,this.updateTriggerDistance)),n.i(c.a)("sidebar.toggled",this.updateTriggerDistance),this.updateTriggerDistance(!0),this.update=this.update.bind(this),this.$context.scroll(this.update),setTimeout(this.update,0))}}return u(t,[{key:"update",value:function(){!this.queue&&this.$context.scrollTop()>this.triggerDistance&&this.fetchPage(++this.page)}},{key:"fetchPage",value:function(t){this.queue||this.spinner.start(333),this.queue++,this.url=this.url.replace(/page=[0-9]+/,"page="+t),$.get(this.url,this.appendPage,"html").fail(this.spinner.error.bind(this.spinner,!1))}},{key:"appendPage",value:function(t){this.spinner.stop(),--this.queue&&this.spinner.start(100);var e=$(t);if(this.$elem.append(e),++this.pages==h){this.$context.off("scroll",this.update);var i=this.url.replace(/page=[0-9]+/,"page="+(this.page+1)+"&sanity=true");this.$elem.append('<div class="listing-notices">\n        <span class="icon"><i class="far fa-lg fa-pause-circle"></i></span>\n        <div class="notice">Sanity check reached!<br/>\n        You can change this setting in your <a class="link" href="/settings/browsing" target="_blank">browsing settings</a></div>\n        <a class="button" href="'+i+'">Continue?</a>\n        </div>')}history.replaceState({page:this.page},null,this.url),this.page<this.total?(this.updateTriggerDistance(),setTimeout(this.update,100)):(this.$context.off("scroll",this.update),this.$elem.append('<footer class="pagination-notice"><i class="far fa-lg fa-code"></i> Congratulations, you\'ve reached the end of the internet!<a class="to-top" href="#top"><i class="fa fa-lg fa-chevron-up"></i></a></footer>')),a.add($(".lazyload",e),this.$context),n.i(c.b)("infinite_scroll.appended",e)}},{key:"updateTriggerDistance",value:function(t){t&&(this._contextOuterHeight=Math.min(o.d.height(),this.$context.outerHeight()));var e=this.$context[0].scrollHeight||this.$context.height();this.triggerDistance=e-this._contextOuterHeight-450}}]),t}();$(".infinite-scroll").toArray().mapConstructor(d)},function(t,e){$(".private-messages").on("click",".pm-body-toggle",function(){var t=$(this),e=t.closest(".pm").find(".pm-body");e.hasClass("extended")?(e.removeClass("extended"),t.text("Show more…")):(e.addClass("extended"),t.text("Show less"))})},function(t,e,n){"use strict";function i(t){if(t.hasClass("comment-is-reply"))return t.parent();var e=t.next();return e.hasClass("comment-replies")?e:$('<div class="comment-replies">').insertAfter(t)}Object.defineProperty(e,"__esModule",{value:!0});var o=n(11),r=n(1),s=n(10),a=$("#comments"),l=$(".comment-add-button"),c=$(".comment-editor"),u=Object.create(null),h=void 0;new o.Editor($(".editor",c)),a.on("click",".toggle-comment-replies",function(t){t.preventDefault();var e=$(this),i=e.parent();if(!i.hasClass("pending")){var o=$(".comment",i);if(e.hasClass("extended"))o.slice(0,-h).remove(),e.html(e.data("showMessage")).removeClass("extended");else{h=o.length,e.data("showMessage",e.html()).empty(),i.addClass("pending");var a=n.i(r.text)(e);$.get(this.href).catch(a.errorCallback(!1)).then(function(t){t&&t.views||a.error(!1),e.html('Hide replies<i class="fa fa-fw fa-lg fa-angle-up"></i>').addClass("extended"),o.remove(),i.append(t.views).removeClass("pending"),s.add($(".lazyload",i))})}}}),l.click(function(){l.hide(),c.show()}),$(".abort",c).click(function(){c.hide(),l.show()}),a.on("click",".comment-reply-button",function(t){t.preventDefault();var e=$(this).closest(".comment"),s=i(e),a=s[0].id;if(a in u)return void u[a].append("@"+e.data("author")+" ").focus();var l=n.i(r.text)(s);$.get(this.href).catch(l.errorCallback(!1)).then(function(t){t&&t.view||l.error(!1),l.stop(0);var n=$(t.view).appendTo(s).show(),i=new o.Editor($(".editor",n));u[a]=i,i.content("@"+e.data("author")+" "),$(".abort",n).click(function(){n.remove(),delete u[a]})})}),a.on("click",".comment-edit-button",function(t){t.preventDefault();var e=$(this).hide(),i=e.closest(".comment"),s=$(".comment-body",i),a=n.i(r.default)(s);$.get(this.href).catch(a.errorCallback(!1)).then(function(t){t&&t.view||a.error(!1),a.stop(0),s.hide();var n=$(t.view).insertAfter(s),i=$(".submit",n),r=new o.Editor($(".editor",n));$(r).on("update",function(){r.changed()&&!r.isEmpty()?i.prop("disabled",!1):i.prop("disabled",!0)}),$(".abort",n).click(function(){n.remove(),s.show(),e.show()})})})},function(t,e,n){"use strict";var i=n(2),o=n(1),r=n(0),s=n(51),a=n(16),l=n(13),c=function(){function t(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{!i&&a.return&&a.return()}finally{if(o)throw r}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();$("#tag-add-form").length&&n(39);var u=$("#fav-button");if(u.length){!function t(){function e(e){e.preventDefault(),o.globalSpinner.start(),$.post(this.href).done(function(e){if(e&&e.status){var n=u;u=$(e.view),n.replaceWith(u),o.globalSpinner.success(),t()}else o.globalSpinner.error()}).fail(o.globalSpinner.errorCallback())}u.hasClass("add-button")?u.on("click",".add-fav",e):u.click(e)}()}var h=$("#wallpaper-category-form");h.length&&$("input:radio",h).on("change",function(){var t=n.i(o.tooltip)(h);$.post(h.attr("action"),{_token:i.default,wallpaper_id:l.wallpaper_id,wallpaper_category:this.value}).done(function(e){e.status?t.success():t.error()}).fail(t.errorCallback())});var d=$("#wallpaper-lock-form");d.length&&$("input:checkbox",d).on("change",function(){var t=n.i(o.tooltip)(d),e={_token:i.default,wallpaper_id:l.wallpaper_id};e[this.value]=+this.checked,$.post(d[0].action,e).done(function(e){e.status?t.success():t.error()}).fail(t.errorCallback())}),$(".showcase-crop").click(function(t){t.preventDefault(),r.fetchView(this.href).then(function(t){return new Promise(function(e){var n=$("#respicker-form",t),i=new a.a($(".respicker",n));n.submit(function(t){t.preventDefault(),e(i.first)})})}).then(function(t){var e=c(t,2),i=e[0],a=e[1],u="<p>Crop the image to "+i+" × "+a+" pixels? (This may take a few seconds)</p>";(i>l.$img[0].naturalWidth||a>l.$img[0].naturalHeight)&&(u+='<p class="warning">The selected resolution is larger than the image\'s original size. Upscaling will result in a loss of quality!</p>'),r.confirm(u,"Auto-Crop").then(function(){o.globalSpinner.start(0),n.i(s.a)(l.$img[0],i,a),o.globalSpinner.stop()})})});var f=$(".showcase-report");f.length&&f.click(function(t){t.preventDefault(),r.fetchView(this.href).then(n(32).init)})},function(t,e,n){"use strict";function i(t){if(!t)return l.error("Please enter a tag name!");var e=n.i(c.tooltip)(h);$.post(h[0].action,{_token:r.default,wallpaper_id:s.wallpaper_id,tag_name:t}).done(function(t){switch(t.status){case!0:u.append(t.view),d.val("").focus(),e.success();break;case!1:l.error(t.msg),e.stop();break;case"newtag":n(12).default(t.view,i),e.stop()}}).fail(l.error)}function o(t){if(t.originalEvent.confirmed){t.preventDefault();var e=this.parentNode;e.style.opacity="0.5",$.post($(this).data("href"),function(t,n,i){t.status?e.remove():(e.style.opacity="1",l.error(t.msg))}).fail(function(){e.style.opacity="1",l.error("Something went wrong")})}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),s=n(13),a=n(8),l=n(0),c=n(1),u=$("#tags"),h=$("#tag-add-form"),d=$("#tag-add-name",h);h.submit(function(t){t.preventDefault(),i(d.val())}),u.on("click",".tag-rm",o),new a.Autocomplete(d,{select:i,itemTemplateId:"template-autocomplete-tag",positionFixed:!1})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(5),o=n(7),r=n(9),s=$(".sidebar");s.each(function(){var t=$(this),e=t.data("storage-id");new o.Collapsible(t,{toggleAnchor:$(".sidebar-toggle",t),cancelable:!1,persistent:!!e,storageId:"sidebar."+e}).on("extended",function(){return n.i(i.b)("sidebar.toggled",t)}),n.i(r.a)($(".sidebar-content",t))}),$(".sidebar-section",s).each(function(){var t=$(".sidebar-section-toggle,.sidebar-section-toggle+h2",this);if(t.length){var e=$(this),n=e.data("storage-id");new o.Collapsible(e,{toggleAnchor:t,collapsed:!1,cancelable:!1,persistent:!!n,storageId:"sidebar-section."+n})}})},,,,function(t,e,n){"use strict";function i(t){t.on("click",".thumb-tags-toggle",function(t){t.preventDefault();var e=$(this).closest(".thumb"),i=$(".thumb-tags-outter",e);if(i.length)i.toggleClass("visible");else{var r=n(1).default(e,50);$.get($(this).data("href")).then(function(t){t&&t.view?(r.stop(),$(t.view).addClass("visible").appendTo(e),n.i(o.a)($(".tags-"+$(".thumb-tags-outter",e).data("hashid"))),$("#tag-add-"+$(".thumb-tags-outter",e).data("hashid")).focus()):r.error()}).catch(r.errorCallback())}})}Object.defineProperty(e,"__esModule",{value:!0}),e.init=i;var o=n(9),r=$(".thumbs-container");r.length&&i(r)},function(t,e,n){"use strict";new(n(7).Collapsible)(".topmenu",{hoverAnchor:$(".topmenu-toggle"),collapsed:!0})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);window.Dropzone.options.uploadForm={maxFiles:20,acceptedFiles:"image/*",autoProcessQueue:!1,uploadMultiple:!1,parallelUploads:20,clickable:".dropzone-upload",previewsContainer:"#dropzone-previews",previewTemplate:$("#template-dropzone-thumb").text(),dictDefaultMessage:"",thumbnailWidth:null,thumbnailHeight:200,addRemoveLinks:!1,init:function(){var t=this,e=$("#upload-start"),n=$("#upload-clear"),o=$("#upload-done"),r=$("#upload-has-fails"),s=[],a=!1;e.click(function(){e.removeClass("live"),n.removeClass("live"),t.processQueue()}),n.click(function(){t.getQueuedFiles().forEach(t.removeFile.bind(t)),t.getRejectedFiles().forEach(t.removeFile.bind(t)),s.forEach(t.removeFile.bind(t)),s=[],n.removeClass("live")}),o.click(function(){document.location.reload(!0)}),this.on("addedfile",function(){e.addClass("live"),n.addClass("live")}),this.on("removedfile",function(){t.getQueuedFiles().length||t.getRejectedFiles().length||(e.removeClass("live"),n.removeClass("live"))}),this.on("maxfilesexceeded",function(e){i.error("You can only add "+t.options.maxFiles+" files at once."),t.removeFile(e)}),this.on("thumbnail",function(t){$(t.previewElement).removeClass("dz-preview-pending"),$(".wall-res",t.previewElement).text(t.width+" x "+t.height)}),this.on("error",function(t,e,i){i&&s.push(t),n.addClass("live"),$(".errormsg",t.previewElement).html(e)}),this.on("success",function(t){a=!0,$(".rm",t.previewElement).remove()}),this.on("queuecomplete",function(){a&&(s.length?r.show():document.location.reload(!0))})}}},function(t,e,n){"use strict";function i(){var t=p.b().copy(),e=this.value;$.post(v.action,{_token:u.default,wallpaper_ids:t.ids(),purity:e}).done(function(n){n.status?(t.setPurity(e),l()):f.error(n.msg)}).fail(f.error)}function o(){var t=p.b().copy(),e=this.value;$.post(g.action,{_token:u.default,wallpaper_ids:t.ids(),category:e}).done(function(n){n.status?(t.setCategory(e),l()):f.error(n.msg)}).fail(f.error)}function r(t){t.preventDefault();var e=p.b().copy(),n=y.value;if(!c(n))return void f.error("Invalid URL. Please include the full link (https://...)");$.post(this.action,{_token:u.default,wallpaper_ids:e.ids(),source:n}).done(function(t){t.status?(e.setSource(n),b.text("Source Applied").fadeOut(3500),l()):f.error(t.msg)}).fail(f.errorCallback())}function s(t){t.preventDefault();var e=$(this).data("wallpaper-data");e._token=u.default,$.post(v.action,e).done(function(t){t.status?(p.c(e.wallpaper_id).setPurity(e.purity),l()):f.error(t.msg)}).fail(f.errorCallback())}function a(t){t.preventDefault();var e=$(this).data("wallpaper-data");e._token=u.default,$.post(g.action,e).done(function(t){t.status?(p.c(e.wallpaper_id).setCategory(e.category),l()):f.error(t.msg)}).fail(f.errorCallback())}function l(t,e,i){var o=n.i(d.f)(i||p.b());o.purity?$("#"+o.purity,v).prop("checked",!0):$("input",v).prop("checked",!1),o.category?$("#"+o.category,g).prop("checked",!0):$("input",g).prop("checked",!1),y.value=o.source||""}function c(t){return/^(http(s)?:\/\/)(www\.)?[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/.test(t)}Object.defineProperty(e,"__esModule",{value:!0});var u=n(2),h=n(5),d=n(4),f=n(0),p=(n(48),n(19)),v=$("#uploading-purity-form")[0],g=$("#uploading-category-form")[0],m=$("#uploading-source-form"),y=$("#source",m)[0],b=$("#source-status");p.a(),l(),$(window).on("beforeunload",function(){return"Any changes will be lost"}),$("#upload-complete").on("click",function(){$(window).off("beforeunload")}),$("#discard-all-uploads").on("click",function(){$(window).off("beforeunload")}),n.i(h.a)("thumbselector.selected thumbselector.deselected",l),$("input",v).on("change",i),$("input",g).on("change",o),m.submit(r),$("#thumbs").on("click",".purity > a",s).on("click",".category > a",a)},function(t,e,n){"use strict";function i(){var t=a.b().copy(),e=void 0;if(t.length<=0)for(e=d.length;e--;)d[e].hide();else for(e=d.length;e--;)d[e].appliesToAll(t)?d[e].show():d[e].hide()}function o(t){if(!t)return h.alert("Please enter a tag name!");var e=a.b().copy();$.post(g,{_token:c.default,tag_name:t,wallpaper_ids:e.ids()},null,"json").done(function(t){switch(t.status){case!0:var i=d.find(function(e){return e.id==t.tag.id});i?i.show():(i=new s($(t.tag.view).appendTo(f)[0]),d.push(i)),i.addToSelection(e);break;case"newtag":n(12).default(t.view,o);break;default:h.error("Something went wrong: "+t.msg)}v.val("").focus()})}function r(t){if(t.originalEvent.confirmed){t.preventDefault();var e=a.b().copy(),n=$(this).parent().data("tag-id"),i=d.find(function(t){return t.id==n});i.elem.style.opacity="0.5",$.post($(this).data("href"),{wallpaper_ids:e.ids()},null,"json").done(function(t){t.status?(i.removeFromSelection(e).hide(),i.appliesToAny(a.d())||i.remove()):(i.elem.style.opacity="1",h("Something went wrong: "+t.msg))}).fail(function(){i.elem.style.opacity="1",h.alert("Something went wrong")})}}function s(t){this.elem=t,this.$elem=$(t),this.id=this.$elem.data("tag-id")}var a=n(19),l=n(5),c=n(2),u=n(8),h=n(0),d=void 0,f=$("#tags"),p=$("#tag-add-form"),v=$("#tag-add-name",p),g=p.attr("action");s.prototype={addToSelection:function(t){for(var e=t.length;e--;)t[e].tags.contains(this.id)||t[e].tags.push(this.id);return this},removeFromSelection:function(t){for(var e=t.length;e--;)t[e].tags.remove(this.id);return this},appliesToAll:function(t){for(var e=t.length;e--;)if(!t[e].tags.contains(this.id))return!1;return!0},appliesToAny:function(t){for(var e=t.length;e--;)if(t[e].tags.contains(this.id))return!0;return!1},hide:function(){return this.$elem.css({opacity:.33}),this},show:function(){return this.$elem.css({opacity:1}),this},remove:function(){this.$elem.detach(),d.remove(this)}},function(){d=$(".tag",f).toArray().mapConstructor(s),n.i(l.a)("thumbselector.selected thumbselector.deselected",i),f.on("click",".tag-rm",r),p.submit(function(t){t.preventDefault(),o(v.val())}),new u.Autocomplete(v,{select:o,itemTemplate:$("#template-autocomplete-tag").text(),positionFixed:!1})}()},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"$panel",function(){return c}),n.d(e,"Dropdown",function(){return u});var s=n(7),a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l='<p class="nothing">Something went wrong :(</p>',c=$("#userpanel"),u=function(t){function e(t){i(this,e);var n=t instanceof $?t:$(t),r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n.data("dropdown-selector"),{hoverAnchor:n,cancelable:!0,collapsed:!0}));return r.$anchor=n,r.$body=$(".dropdown-body",r.$elem),r.$content=$(".dropdown-content",r.$body),r.$body.height(r.$body[0].scrollHeight),r.$anchor[0].href&&r.$this.one("willExtend",function(){return r.loadContent(r.$anchor[0].href)}),r.$this.on("willExtend",function(){return r.setPosition()}),r}return r(e,t),a(e,[{key:"loadContent",value:function(t){var e=this;$.get(t).catch(function(){return e.setContent(l)}).then(function(t){t&&t.view?e.setContent(t.view):e.setContent(l)})}},{key:"setContent",value:function(t){this.$content.html(t),this.$body.height(this.$body[0].scrollHeight)}},{key:"setPosition",value:function(){return this.$elem.css({right:c.innerWidth()-this.$anchor.position().left-this.$anchor.outerWidth()}),this}}]),e}(s.Collapsible);$(".userpanel-dropdown-toggle").each(function(t,e){return new u(e)})},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{!i&&a.return&&a.return()}finally{if(o)throw r}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function(){function t(e){i(this,t),this._items=e||[]}return r(t,[{key:"size",value:function(){return this._items.length}},{key:"values",value:function(){return this._items}},{key:"add",value:function(t){var e=this._search(t),n=o(e,2),i=n[0],r=n[1];return!i&&(r<0?(this._items=[t],!0):(this._items.splice(r,0,t),!0))}},{key:"contains",value:function(t){return this._search(t)[0]}},{key:"without",value:function(e){if(!e instanceof t)throw new Error("Set operations only supported for instances of SortableSet");for(var n=this._items,i=e._items,o=[],r=n.length,s=0,a=0;s<r;++s)n[s]===i[a]?a++:o.push(n[s]);return new t(o)}},{key:"_search",value:function(t){var e=this._items;if(!e.length)return[!1,-1];for(var n=0,i=e.length-1,o=void 0;n<=i;)if(o=n+Math.floor((i-n)/2),e[o]<t)n=o+1;else{if(!(e[o]>t))return[!0,o];i=o-1}return[!1,n]}}]),t}();e.a=s},function(t,e,n){"use strict";function i(t){return t.substring(t.lastIndexOf("/")+1)}function o(t,e,o){var s=i(t.src);s=s.slice(0,s.lastIndexOf("."))+"_"+e+"x"+o+".png";var a=document.createElement("canvas");a.width=e,a.height=o;var l=a.getContext("2d"),c=t.naturalWidth,u=t.naturalHeight,h=void 0,d=void 0,f=void 0,p=void 0,v=void 0;e/c>o/u?(h=0,f=c,v=e/c,p=o/v,d=(u-p)/2):(d=0,p=u,v=o/u,f=e/v,h=(c-f)/2),l.drawImage(t,h,d,f,p,0,0,e,o),a.toBlob(function(t){n.i(r.a)(t,s)})}e.a=o;var r=n(24)},function(t,e,n){"use strict";function i(t){a.c.one("keyup",n.i(l.b)(o));try{t[0][u]()}catch(t){n.i(c.b)("fullscreenerror")}}function o(){try{a.f[d]()}catch(t){n.i(c.b)("fullscreenerror")}}function r(){return a.f[h]}function s(t){return r()?(o(),!1):(i(t),!0)}Object.defineProperty(e,"__esModule",{value:!0}),e.enter=i,e.exit=o,e.element=r,e.toggle=s;var a=n(3),l=n(4),c=n(5),u=void 0,h=void 0,d=void 0,f=void 0,p=void 0;a.e.requestFullscreen?(u="requestFullscreen",h="fullscreenElement",d="exitFullscreen",f="fullscreenchange",p="fullscreenerror"):a.e.msRequestFullscreen?(u="msRequestFullscreen",h="msFullscreenElement",d="msExitFullscreen",f="msfullscreenchange",p="msfullscreenerror"):a.e.mozRequestFullScreen?(u="mozRequestFullScreen",h="mozFullScreenElement",d="mozCancelFullScreen",f="mozfullscreenchange",p="mozfullscreenerror"):a.e.webkitRequestFullscreen&&(u="webkitRequestFullscreen",h="webkitFullscreenElement",d="webkitExitFullscreen",f="webkitfullscreenchange",p="webkitfullscreenerror"),a.c.on(p,function(){n.i(c.b)("fullscreenerror")}).on(f,function(){n.i(c.b)("fullscreenchange",[r()])})},,,,function(t,e,n){n(20),t.exports=n(22)}]);